@{
    ViewBag.Title = "Random Team Generator";
    var levels = ViewBag.Levels as List<List<string>>;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<h2 style="text-align:center; margin-bottom:20px;">⚽ Random Team Generator</h2>

<form method="post" asp-action="RandomizeTeams" id="teamForm" style="text-align:center;">
    <table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; margin:auto;">
        <tr style="background-color:#f2f2f2;">
            <th>Level</th>
            <th>Player 1</th>
            <th>Player 2</th>
        </tr>
        <tbody id="levelsTable">
            @for (int i = 0; i < levels.Count; i++)
            {
                <tr>
                    <td>@(i + 1)</td>
                    <td><input type="text" name="levels[@i][0]" value="@levels[i][0]" style="width:150px;" /></td>
                    <td><input type="text" name="levels[@i][1]" value="@levels[i][1]" style="width:150px;" /></td>
                </tr>
            }
        </tbody>
    </table>

    <div style="margin-top:15px;">
        <button type="button" id="addLevelBtn" style="margin-right:10px; padding:5px 10px;">
            <i class="bi bi-plus-circle" style="margin-right:5px;"></i>Add Level
        </button>
        <button type="submit" style="padding:5px 10px;">
            <i class="bi bi-shuffle" style="margin-right:5px;"></i>Randomize Teams
        </button>
    </div>
</form>

@if (ViewBag.Team1 != null)
{
    <hr style="margin:30px 0;" />
    <div style="display:flex; justify-content:center; gap:60px;">
        <div style="text-align:left;">
            <h3 style="color:#007bff;">
                <i class="bi bi-trophy-fill" style="color:gold;"></i> Team 1
            </h3>
            <ul>
                @foreach (var player in ViewBag.Team1)
                {
                    <li>@player</li>
                }
            </ul>
        </div>

        <div style="text-align:left;">
            <h3 style="color:#dc3545;">
                <i class="bi bi-trophy-fill" style="color:gold;"></i> Team 2
            </h3>
            <ul>
                @foreach (var player in ViewBag.Team2)
                {
                    <li>@player</li>
                }
            </ul>
        </div>
    </div>
}

<script>
    document.getElementById("addLevelBtn").addEventListener("click", function () {
        const table = document.getElementById("levelsTable");
        const index = table.rows.length;
        const newRow = document.createElement("tr");

        newRow.innerHTML = `
            <td>${index + 1}</td>
            <td><input type="text" name="levels[${index}][0]" style="width:150px;" /></td>
            <td><input type="text" name="levels[${index}][1]" style="width:150px;" /></td>
        `;
        table.appendChild(newRow);
    });
</script>
